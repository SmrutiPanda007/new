!function(n,t,i,r){"use strict";var u="datepaginator",f=function(t,i){this._element=t;this.$element=n(t);this._init(i)},e;f.defaults={fillWidth:!0,highlightSelectedDate:!0,highlightToday:!0,hint:"dddd, Do MMMM YYYY",injectStyle:!0,itemWidth:35,navItemWidth:20,offDays:"Sat,Sun",offDaysFormat:"ddd",onSelectedDateChanged:null,selectedDate:moment().clone().startOf("day"),selectedDateFormat:"YYYY-MM-DD",selectedItemWidth:140,showCalendar:!0,showOffDays:!0,showStartOfWeek:!0,size:r,startOfWeek:"Mon",startOfWeekFormat:"ddd",squareEdges:!1,text:"ddd<br/>Do",textSelected:"dddd<br/>Do, MMMM YYYY",useBootstrap2:!1,width:0};f.prototype={setSelectedDate:function(n,t){this._setSelectedDate(moment(n,t?t:this.options.selectedDateFormat));this._render()},remove:function(){this._destroy();n.removeData(this,"plugin_"+u)},_init:function(t){this.options=n.extend({},f.defaults,t);this.options.width?this.options.fillWidth=!1:(this.options.width=this.$element.width(),this.options.fillWidth=!0);"string"==typeof this.options.selectedDate&&(this.options.selectedDate=moment(this.options.selectedDate,this.options.selectedDateFormat).clone().startOf("day"));"small"===this.options.size?this.options.size="sm":"large"===this.options.size&&(this.options.size="lg");this._destroy();this._subscribeEvents();this._render()},_unsubscribeEvents:function(){this.$element.off("click");this.$element.off("selectedDateChanged")},_subscribeEvents:function(){this._unsubscribeEvents();this.$element.on("click",n.proxy(this._clickedHandler,this));"function"==typeof this.options.onSelectedDateChanged&&this.$element.on("selectedDateChanged",this.options.onSelectedDateChanged);this.options.fillWidth&&n(t).on("resize",n.proxy(this._resize,this))},_destroy:function(){this.initialized&&(this.$calendar&&this.$calendar.datepicker("remove"),this.$wrapper.remove(),this.$wrapper=null,this._unsubscribeEvents());this.initialized=!1},_clickedHandler:function(t){t.preventDefault();var r=n(t.target),i=r.attr("class");-1!=i.indexOf("dp-nav-left")?this._back():-1!=i.indexOf("dp-nav-right")?this._forward():-1!=i.indexOf("dp-item")&&this._select(r.attr("data-moment"))},_setSelectedDate:function(n){!1===n.isSame(this.options.selectedDate)&&(this.options.selectedDate=n.startOf("day"),this.$element.trigger("selectedDateChanged",[n.clone()]))},_back:function(){this._setSelectedDate(this.options.selectedDate.clone().subtract("day",1));this._render()},_forward:function(){this._setSelectedDate(this.options.selectedDate.clone().add("day",1));this._render()},_select:function(n){this._setSelectedDate(moment(n,this.options.selectedDateFormat));this._render()},_calendarSelect:function(n){this._setSelectedDate(moment(n.date));this._render()},_resize:function(){this.options.width=this.$element.width();this._render()},_render:function(){var t=this;this.initialized?this.$calendar&&this.$calendar.datepicker("remove"):(this.$element.addClass(this.options.useBootstrap2?"pagination":"").removeClass("datepaginator datepaginator-sm datepaginator-lg").addClass("sm"===this.options.size?"datepaginator-sm":"lg"===this.options.size?"datepaginator-lg":"datepaginator"),this.$wrapper=n(this._template.list),this.$leftNav=n(this._template.listItem).append(n(this._template.navItem).addClass("dp-nav-left").addClass("sm"===this.options.size?"dp-nav-sm":"lg"===this.options.size?"dp-nav-lg":"").addClass(this.options.squareEdges?"dp-nav-square-edges":"").append(n(this._template.icon).addClass("fa-angle-left").addClass("dp-nav-left")).width(this.options.navItemWidth)),this.$rightNav=n(this._template.listItem).append(n(this._template.navItem).addClass("dp-nav-right").addClass("sm"===this.options.size?"dp-nav-sm":"lg"===this.options.size?"dp-nav-lg":"").addClass(this.options.squareEdges?"dp-nav-square-edges":"").append(n(this._template.icon).addClass("fa-angle-right").addClass("dp-nav-right")).width(this.options.navItemWidth)),this.$calendar=this.options.showCalendar?n(this._template.calendar):r,this._injectStyle(),this.initialized=!0);this.$element.empty().append(this.$wrapper.empty());this.$wrapper.append(this.$leftNav);n.each(this._buildData(),function(i,r){var u=n(t._template.dateItem).attr("data-moment",r.m).attr("title",r.hint).width(r.itemWidth);r.isSelected&&t.options.highlightSelectedDate&&u.addClass("dp-selected");r.isToday&&t.options.highlightToday&&u.addClass("dp-today");r.isStartOfWeek&&t.options.showStartOfWeek&&u.addClass("dp-divider");r.isOffDay&&t.options.showOffDays&&u.addClass("dp-off");r.isSelected&&t.options.showCalendar&&u.append(t.$calendar);"sm"===t.options.size?u.addClass("dp-item-sm"):"lg"===t.options.size&&u.addClass("dp-item-lg");u.append(r.text);t.$wrapper.append(n(t._template.listItem).append(u))});this.$wrapper.append(this.$rightNav);this.$calendar&&this.$calendar.datepicker({autoclose:!0,forceParse:!0,startView:0,minView:0,todayHighlight:!0}).datepicker("update",this.options.selectedDate.toDate()).on("changeDate",n.proxy(this._calendarSelect,this))},_injectStyle:function(){this.options.injectStyle&&!i.getElementById("bootstrap-datepaginator-style")&&n("<style type='text/css' id='bootstrap-datepaginator-style'> "+this._css+" <\/style>").appendTo("head")},_buildData:function(){for(var i=this.options.width-(this.options.selectedItemWidth-this.options.itemWidth+2*this.options.navItemWidth),t=Math.floor(i/this.options.itemWidth),u=parseInt(t/2),f=Math.floor(i/t),e=Math.floor(this.options.selectedItemWidth+(i-t*f)),o=moment().startOf("day"),s=this.options.selectedDate.clone().subtract("days",u),h=this.options.selectedDate.clone().add("days",t-u),r=[],n=s;n.isBefore(h);n.add("days",1))r[r.length]={m:n.clone().format(this.options.selectedDateFormat),isSelected:n.isSame(this.options.selectedDate)?!0:!1,isToday:n.isSame(o)?!0:!1,isOffDay:-1!==this.options.offDays.split(",").indexOf(n.format(this.options.offDaysFormat))?!0:!1,isStartOfWeek:-1!==this.options.startOfWeek.split(",").indexOf(n.format(this.options.startOfWeekFormat))?!0:!1,text:n.isSame(this.options.selectedDate)?n.format(this.options.textSelected):n.format(this.options.text),hint:n.format(this.options.hint),itemWidth:n.isSame(this.options.selectedDate)?e:f};return r},_template:{list:'<ul class="pagination"><\/ul>',listItem:"<li><\/li>",navItem:'<a href="#" class="dp-nav"><\/a>',dateItem:'<a href="#" class="dp-item"><\/a>',icon:'<i class="fa"><\/i>',calendar:'<i id="dp-calendar" class="glyphicon glyphicon-calendar"><\/i>'},_css:".datepaginator{font-size:12px;height:60px}.datepaginator-sm{font-size:10px;height:40px}.datepaginator-lg{font-size:14px;height:80px}.pagination{margin:0;padding:0;white-space:nowrap}.dp-nav{height:60px;padding:22px 0!important;width:20px;margin:0!important;text-align:center}.dp-nav-square-edges{border-radius:0!important}.dp-item{height:60px;padding:13px 0!important;width:35px;margin:0!important;border-left-style:hidden!important;text-align:center}.dp-item-sm{height:40px!important;padding:5px!important}.dp-item-lg{height:80px!important;padding:22px 0!important}.dp-nav-sm{height:40px!important;padding:11px 0!important}.dp-nav-lg{height:80px!important;padding:33px 0!important}a.dp-nav-right{border-left-style:hidden!important}.dp-divider{border-left:2px solid #ddd!important}.dp-off{background-color:#F0F0F0!important}.dp-today{background-color:#88B5DB!important;color:#fff!important}.dp-selected{background-color:#428bca!important;color:#fff!important;width:140px}#dp-calendar{padding:3px 5px 0 0!important;position:absolute;right:0;top:10}"};e=function(n){t.console&&t.console.error(n)};n.fn[u]=function(t,i){return this.each(function(){var r=n.data(this,"plugin_"+u);"string"==typeof t?r?n.isFunction(r[t])&&"_"!==t.charAt(0)?("string"==typeof i&&(i=[i]),r[t].apply(r,i)):e("No such method : "+t):e("Not initialized, can not call method : "+t):r?r._init(t):n.data(this,"plugin_"+u,new f(this,t))})}}(jQuery,window,document)