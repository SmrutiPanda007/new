var TableEditable=function(){var n=function(){function f(n,t){for(var r=n.fnGetData(t),u=$(">td",t),i=0,f=u.length;i<f;i++)n.fnUpdate(r[i],t,i,!1);n.fnDraw()}function u(n,t){var r=n.fnGetData(t),i=$(">td",t);i[0].innerHTML='<input type="text" class="form-control input-small" value="'+r[0]+'">';i[1].innerHTML='<input type="text" class="form-control input-small" value="'+r[1]+'">';i[2].innerHTML='<input type="text" class="form-control input-small" value="'+r[2]+'">';i[3].innerHTML='<input type="text" class="form-control input-small" value="'+r[3]+'">';i[4].innerHTML='<a class="edit" href="">Save<\/a>';i[5].innerHTML='<a class="cancel" href="">Cancel<\/a>'}function e(n,t){var i=$("input",t);n.fnUpdate(i[0].value,t,0,!1);n.fnUpdate(i[1].value,t,1,!1);n.fnUpdate(i[2].value,t,2,!1);n.fnUpdate(i[3].value,t,3,!1);n.fnUpdate('<a class="edit" href="">Edit<\/a>',t,4,!1);n.fnUpdate('<a class="delete" href="">Delete<\/a>',t,5,!1);n.fnDraw()}var r=$("#sample_editable_1"),t=r.dataTable({lengthMenu:[[5,15,20,-1],[5,15,20,"All"]],pageLength:10,language:{lengthMenu:" _MENU_ records"},columnDefs:[{orderable:!0,targets:[0]},{searchable:!0,targets:[0]}],order:[[0,"asc"]]}),o=$("#sample_editable_1_wrapper"),n,i;o.find(".dataTables_length select").select2({showSearchInput:!1});n=null;i=!1;$("#sample_editable_1_new").click(function(r){if(r.preventDefault(),i&&n)if(confirm("Previose row not saved. Do you want to save it ?"))e(t,n),$(n).find("td:first").html("Untitled"),n=null,i=!1;else{t.fnDeleteRow(n);n=null;i=!1;return}var o=t.fnAddData(["","","","","",""]),f=t.fnGetNodes(o[0]);u(t,f);n=f;i=!0});r.on("click",".delete",function(n){if(n.preventDefault(),confirm("Are you sure to delete this row ?")!=!1){var i=$(this).parents("tr")[0];t.fnDeleteRow(i);alert("Deleted! Do not forget to do some ajax to sync with backend :)")}});r.on("click",".cancel",function(r){r.preventDefault();i?(t.fnDeleteRow(n),n=null,i=!1):(f(t,n),n=null)});r.on("click",".edit",function(i){i.preventDefault();var r=$(this).parents("tr")[0];n!==null&&n!=r?(f(t,n),u(t,r),n=r):n==r&&this.innerHTML=="Save"?(e(t,n),n=null,alert("Updated! Do not forget to do some ajax to sync with backend :)")):(u(t,r),n=r)})};return{init:function(){n()}}}()