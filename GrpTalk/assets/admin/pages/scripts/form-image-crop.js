var FormImageCrop=function(){var t=function(){$("#demo1").Jcrop()},r=function(){function t(n){$("#x1").val(n.x);$("#y1").val(n.y);$("#x2").val(n.x2);$("#y2").val(n.y2);$("#w").val(n.w);$("#h").val(n.h)}function i(){$("#coords input").val("")}var n;$("#demo2").Jcrop({onChange:t,onSelect:t,onRelease:i},function(){n=this});$("#coords").on("change","input",function(){var t=$("#x1").val(),i=$("#x2").val(),r=$("#y1").val(),u=$("#y2").val();n.setSelect([t,r,i,u])})},u=function(){function e(i){if(parseInt(i.w)>0){var f=n/i.w,e=t/i.h;s.css({width:Math.round(f*r)+"px",height:Math.round(e*u)+"px",marginLeft:"-"+Math.round(f*i.x)+"px",marginTop:"-"+Math.round(e*i.y)+"px"})}}var i,r,u,o=$("#preview-pane"),f=$("#preview-pane .preview-container"),s=$("#preview-pane .preview-container img"),n=f.width(),t=f.height();console.log("init",[n,t]);$("#demo3").Jcrop({onChange:e,onSelect:e,aspectRatio:n/t},function(){var n=this.getBounds();r=n[0];u=n[1];i=this;o.appendTo(i.ui.holder)})},f=function(){function t(n){var t=$("<button />").addClass("btn small");return n&&t.append(n),t}function h(n,t){$("#interface").prepend($("<fieldset><\/fieldset>").attr("id",n).append($("<h4><\/h4>").append(t),'<div class="btn-toolbar"><div class="btn-group"><\/div><\/div>'))}function s(t,i){return function(r){$(r.target).closest(".btn-group").find(".active").removeClass("active");$(r.target).addClass("active");var u={};return u[t]=i,n.setOptions(u),!1}}function c(t){return function(i){return $(i.target).addClass("active"),n.animateTo(t,function(){$(i.target).closest(".btn-group").find(".active").removeClass("active")}),!1}}var n,o;$("#demo4").Jcrop({bgFade:!0,bgOpacity:.2,setSelect:[60,70,540,330]},function(){n=this});$("#fadetog").change(function(){n.setOptions({bgFade:this.checked})}).attr("checked",!0);Metronic.updateUniform("#fadetog");$("#shadetog").change(function(){this.checked?$("#shadetxt").slideDown():$("#shadetxt").slideUp();n.setOptions({shade:this.checked})}).attr("checked",!1);var u={bgc_buttons:"Change bgColor",bgo_buttons:"Change bgOpacity",anim_buttons:"Animate Selection"},f={anim1:[217,122,382,284],anim2:[20,20,580,380],anim3:[24,24,176,376],anim4:[347,165,550,355],anim5:[136,55,472,183]},e={Low:.2,Mid:.5,High:.8,Full:1},r={R:"#900",B:"#4BB6F0",Y:"#F0B207",G:"#46B81C",W:"white",K:"black"};for(i in u)h(i,u[i]);o=1;for(i in f)$("#anim_buttons .btn-group").append(t(o++).click(c(f[i]))," ");$("#anim_buttons .btn-group").append(t("Bye!").click(function(t){return $(t.target).addClass("active"),n.animateTo([300,200,300,200],function(){this.release();$(t.target).closest(".btn-group").find(".active").removeClass("active")}),!1}));for(i in e)$("#bgo_buttons .btn-group").append(t(i).click(s("bgOpacity",e[i]))," ");for(i in r)$("#bgc_buttons .btn-group").append(t(i).css({background:r[i],color:i=="K"||i=="R"?"white":"black"}).click(s("bgColor",r[i]))," ");$("#bgo_buttons .btn:first,#bgc_buttons .btn:last").addClass("active");$("#interface").show()},e=function(){function i(){$(".requiresjcrop").hide();$("#demo5").Jcrop({onRelease:r},function(){n=this;n.animateTo([100,100,400,300]);$("#can_click,#can_move,#can_size").attr("checked","checked");Metronic.updateUniform("#can_click,#can_move,#can_size");$("#ar_lock,#size_lock,#bg_swap").attr("checked",!1);Metronic.updateUniform("#ar_lock,#size_lock,#bg_swap");$(".requiresjcrop").show()})}function t(){var t=n.getBounds();return[Math.round(Math.random()*t[0]),Math.round(Math.random()*t[1]),Math.round(Math.random()*t[0]),Math.round(Math.random()*t[1])]}function r(){n.setOptions({allowSelect:!0});$("#can_click").attr("checked",!1);Metronic.updateUniform("#can_click")}var n;i();$("#setSelect").click(function(){n.setSelect(t())});$("#animateTo").click(function(){n.animateTo(t())});$("#release").click(function(){n.release()});$("#disable").click(function(){n.disable();$("#enable").show();$(".requiresjcrop").hide()});$("#enable").click(function(){n.enable();$("#enable").hide();$(".requiresjcrop").show()});$("#rehook").click(function(){return $("#rehook,#enable").hide(),i(),$("#unhook,.requiresjcrop").show(),!1});$("#unhook").click(function(){return n.destroy(),$("#unhook,#enable,.requiresjcrop").hide(),$("#rehook").show(),!1});$("#img1").click(function(){return $(this).addClass("active").closest(".btn-group").find("button.active").not(this).removeClass("active"),n.setImage("../../assets/global/plugins/jcrop/demos/demo_files/sago.jpg"),n.setOptions({bgOpacity:.6}),!1});$("#img2").click(function(){return $(this).addClass("active").closest(".btn-group").find("button.active").not(this).removeClass("active"),n.setImage("../../assets/global/plugins/jcrop/demos/demo_files/pool.jpg"),n.setOptions({bgOpacity:.6}),!1});$("#img3").click(function(){return $(this).addClass("active").closest(".btn-group").find("button.active").not(this).removeClass("active"),n.setImage("../../assets/global/plugins/jcrop/demos/demo_files/sago.jpg",function(){this.setOptions({bgOpacity:1,outerImage:"../../assets/global/plugins/jcrop/demos/demo_files/sagomod.jpg"});this.animateTo(t())}),!1});$("#can_click").change(function(){n.setOptions({allowSelect:!!this.checked});n.focus()});$("#can_move").change(function(){n.setOptions({allowMove:!!this.checked});n.focus()});$("#can_size").change(function(){n.setOptions({allowResize:!!this.checked});n.focus()});$("#ar_lock").change(function(){n.setOptions(this.checked?{aspectRatio:4/3}:{aspectRatio:0});n.focus()});$("#size_lock").change(function(){n.setOptions(this.checked?{minSize:[80,80],maxSize:[350,350]}:{minSize:[0,0],maxSize:[0,0]});n.focus()})},o=function(){var n;$("#demo6").Jcrop({bgOpacity:.5,bgColor:"white",addClass:"jcrop-light"},function(){n=this;n.setSelect([130,65,480,350]);n.setOptions({bgFade:!0});n.ui.selection.addClass("jcrop-selection")});$("#buttonbar").on("click","button",function(){var t=$(this),i=t.closest(".btn-group");i.find("button.active").removeClass("active");t.addClass("active");i.find("[data-setclass]").each(function(){var i=$(this),t=i.data("setclass"),r=i.hasClass("active");if(r){n.ui.holder.addClass(t);switch(t){case"jcrop-light":n.setOptions({bgColor:"white",bgOpacity:.5});break;case"jcrop-dark":n.setOptions({bgColor:"black",bgOpacity:.4});break;case"jcrop-normal":n.setOptions({bgColor:$.Jcrop.defaults.bgColor,bgOpacity:$.Jcrop.defaults.bgOpacity})}}else n.ui.holder.removeClass(t)})})},s=function(){var n={x:13,y:7,x2:487,y2:107,w:474,h:100};$("#demo7").Jcrop({bgFade:!0,setSelect:[n.x,n.y,n.x2,n.y2]})},h=function(){function n(n){$("#crop_x").val(n.x);$("#crop_y").val(n.y);$("#crop_w").val(n.w);$("#crop_h").val(n.h)}$("#demo8").Jcrop({aspectRatio:1,onSelect:n});$("#demo8_form").submit(function(){return parseInt($("#crop_w").val())?!0:(alert("Please select a crop region then press submit."),!1)})},n=function(){$(window).width()<=1024&&$(window).width()>=678?$(".responsive-1024").each(function(){$(this).attr("data-class",$(this).attr("class"));$(this).attr("class","responsive-1024 col-md-12")}):$(".responsive-1024").each(function(){$(this).attr("data-class")&&($(this).attr("class",$(this).attr("data-class")),$(this).removeAttr("data-class"))})};return{init:function(){jQuery().Jcrop&&(Metronic.addResizeHandler(n),n(),t(),r(),u(),f(),e(),o(),s(),h())}}}()