var Inbox=function(){var t=$(".inbox-content"),i=$(".inbox-loading"),u="",r=function(r,f){var e=$(".inbox-nav > li."+f+" a").attr("data-title");u=f;i.show();t.html("");n(r);$.ajax({type:"GET",cache:!1,url:"inbox_inbox.html",dataType:"html",success:function(u){n(r);$(".inbox-nav > li.active").removeClass("active");$(".inbox-nav > li."+f).addClass("active");$(".inbox-header > h1").text(e);i.hide();t.html(u);Layout.fixContentHeight&&Layout.fixContentHeight();Metronic.initUniform()},error:function(){n(r)},async:!1});jQuery("body").on("change",".mail-group-checkbox",function(){var n=jQuery(".mail-checkbox"),t=jQuery(this).is(":checked");jQuery(n).each(function(){$(this).attr("checked",t)});jQuery.uniform.update(n)})},f=function(r,u,f){var e;i.show();t.html("");n(r);e=r.parent("tr").attr("data-messageid");$.ajax({type:"GET",cache:!1,url:"inbox_view.html",dataType:"html",data:{message_id:e},success:function(u){n(r);f&&$(".inbox-nav > li.active").removeClass("active");$(".inbox-header > h1").text("View Message");i.hide();t.html(u);Layout.fixContentHeight();Metronic.initUniform()},error:function(){n(r)},async:!1})},e=function(){$(".inbox-wysihtml5").wysihtml5({stylesheets:["../../assets/global/plugins/bootstrap-wysihtml5/wysiwyg-color.css"]})},o=function(){$("#fileupload").fileupload({url:"../../assets/global/plugins/jquery-file-upload/server/php/",autoUpload:!0});$.support.cors&&$.ajax({url:"../../assets/global/plugins/jquery-file-upload/server/php/",type:"HEAD"}).fail(function(){$('<span class="alert alert-error"/>').text("Upload server currently unavailable - "+new Date).appendTo("#fileupload")})},s=function(r){i.show();t.html("");n(r);$.ajax({type:"GET",cache:!1,url:"inbox_compose.html",dataType:"html",success:function(u){n(r);$(".inbox-nav > li.active").removeClass("active");$(".inbox-header > h1").text("Compose");i.hide();t.html(u);o();e();$(".inbox-wysihtml5").focus();Layout.fixContentHeight();Metronic.initUniform()},error:function(){n(r)},async:!1})},c=function(r){i.show();t.html("");n(r);$.ajax({type:"GET",cache:!1,url:"inbox_reply.html",dataType:"html",success:function(u){n(r);$(".inbox-nav > li.active").removeClass("active");$(".inbox-header > h1").text("Reply");i.hide();t.html(u);$('[name="message"]').val($("#reply_email_content_body").html());h();o();e();Layout.fixContentHeight();Metronic.initUniform()},error:function(){n(r)},async:!1})},a=function(r){i.show();t.html("");n(r);$.ajax({type:"GET",cache:!1,url:"inbox_search_result.html",dataType:"html",success:function(u){n(r);$(".inbox-nav > li.active").removeClass("active");$(".inbox-header > h1").text("Search");i.hide();t.html(u);Layout.fixContentHeight();Metronic.initUniform()},error:function(){n(r)},async:!1})},h=function(){var t=$(".inbox-compose .mail-to .inbox-cc"),n=$(".inbox-compose .input-cc");t.hide();n.show();$(".close",n).click(function(){n.hide();t.show()})},l=function(){var t=$(".inbox-compose .mail-to .inbox-bcc"),n=$(".inbox-compose .input-bcc");t.hide();n.show();$(".close",n).click(function(){n.hide();t.show()})},n=function(n){typeof n!="undefined"&&(n.attr("disabled")?n.attr("disabled",!1):n.attr("disabled",!0))};return{init:function(){$(".inbox").on("click",".compose-btn a",function(){s($(this))});$(".inbox").on("click",".inbox-discard-btn",function(n){n.preventDefault();r($(this),u)});$(".inbox").on("click",".reply-btn",function(){c($(this))});$(".inbox-content").on("click",".view-message",function(){f($(this))});$(".inbox-nav > li.inbox > a").click(function(){r($(this),"inbox")});$(".inbox-nav > li.sent > a").click(function(){r($(this),"sent")});$(".inbox-nav > li.draft > a").click(function(){r($(this),"draft")});$(".inbox-nav > li.trash > a").click(function(){r($(this),"trash")});$(".inbox-content").on("click",".mail-to .inbox-cc",function(){h()});$(".inbox-content").on("click",".mail-to .inbox-bcc",function(){l()});Metronic.getURLParameter("a")==="view"?f():Metronic.getURLParameter("a")==="compose"?s():$(".inbox-nav > li.inbox > a").click()}}}()